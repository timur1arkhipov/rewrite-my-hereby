# tereby – простой планировщик задач

# Оригинал проекта
Мой проект только копия для развития навыков
https://github.com/jakebailey/hereby

# Установка:
npm i -D tereby
yarn add -D tereby
Terebyfile.mjs
Задачи определяются в файле Terebyfile.mjs. Экспортированные задачи доступны для выполнения через командную строку, с поддержкой export default.

# Пример:

```typescript
import { execa } from "execa";
import { task } from "tereby";

export const build = task({
    name: "build",
    run: async () => {
        await execa("tsc", ["-b", "./src"]);
    },
});

export const test = task({
    name: "test",
    dependencies: [build],
    run: async () => {
        await execa("node", ["./out/test.js"]);
    },
});

export const lint = task({
    name: "lint",
    run: async () => {
        await runLinter(...);
    },
});

export const testAndLint = task({
    name: "testAndLint",
    dependencies: [test, lint],
});

export default testAndLint;

export const bundle = task({
    name: "bundle",
    dependencies: [build],
    run: async () => {
        await execa("esbuild", [
            "--bundle",
            "./out/index.js",
            "--outfile=./out/bundled.js",
        ]);
    },
});
```

# Выполнение задач
Исходя из приведенного выше файла Terebyfile:

```console
tereby build        # Выполнить задачу "build"
tereby test         # Выполнить задачу "test", которая зависит от "build".
tereby              # Выполнить задачу по умолчанию.
tereby test bundle  # Выполнить задачи "test" и "bundle" параллельно.
```
# Флаги
tereby также поддерживает несколько флагов:


-h, --help          Отображает данное руководство по использованию.
--terebyfile путь  Путь к файлу Terebyfile. Необязательно.
-T, --tasks         Выводит список доступных задач.

# ESM
tereby реализован с использованием модулей ES. Но не волнуйтесь! Это не значит,
что ваш проект обязательно должен использовать только ESM; просто файл вашего

# Terebyfile должен быть модулем ESM, чтобы функция task могла быть импортирована.
Рекомендуется использовать имя файла Terebyfile.mjs, чтобы гарантировать его обработку
как модуля ESM. Это будет работать даже в проекте на основе CommonJS; модули ES могут
импортировать модули CommonJS.

Если в вашем пакете уже установлено значение "type": "module", то файл Terebyfile.js
тоже подойдет.

# Ограничения
Нет последовательного выполнения задач
tereby не поддерживает выполнение задач последовательно; указание нескольких задач
в командной строке или в качестве зависимостей другой задачи приведет к их параллельному выполнению.
Это соответствует поведению таких инструментов, как make, которые, подобно tereby,
предназначены для кодирования графа зависимостей задач, а не для работы в качестве скрипта.

В общем случае, если вы пытаетесь имитировать последовательное выполнение задач, вам лучше всего
будет явно указать зависимости для ваших задач.

Задача выполняется только один раз
tereby выполнит каждую задачу только один раз за время своего выполнения. Это означает, что
задачи, состоящие из других задач, выполняемых последовательно, как скрипт, не могут быть созданы.
Например, невозможно сначала выполнить "build", затем "clean", а потом снова "build" в рамках одного вызова
tereby, поскольку "build" будет выполнен только один раз (и отсутствие последовательного выполнения задач
все равно делает такую конструкцию невозможной).

Чтобы выполнять задачи в определенном порядке и многократно, запускайте tereby несколько раз:

```console
tereby build
tereby clean
tereby build
```
